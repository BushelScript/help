(self.webpackChunk=self.webpackChunk||[]).push([[284],{3905:(e,t,r)=>{"use strict";r.d(t,{Zo:()=>c,kt:()=>d});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),l=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=l(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=l(r),d=a,f=u["".concat(s,".").concat(d)]||u[d]||m[d]||o;return r?n.createElement(f,i(i({ref:t},c),{},{components:r})):n.createElement(f,i({ref:t},c))}));function d(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=u;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:a,i[1]=p;for(var l=2;l<o;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},6669:(e,t,r)=>{"use strict";r.r(t),r.d(t,{frontMatter:()=>p,metadata:()=>s,toc:()=>l,default:()=>m});var n=r(2122),a=r(9756),o=(r(7294),r(3905)),i=["components"],p={title:"3-2: Resources",sidebar_label:"Part 2: Resources"},s={unversionedId:"ref/resources",id:"ref/resources",isDocsHomePage:!1,title:"3-2: Resources",description:"use expressions find and import resources. Resources refer to external components, such as applications or other scripts.",source:"@site/docs/ref/resources.md",sourceDirName:"ref",slug:"/ref/resources",permalink:"/help/docs/ref/resources",version:"current",lastUpdatedBy:"Ian Gregory",lastUpdatedAt:1623479137,formattedLastUpdatedAt:"6/12/2021",sidebar_label:"Part 2: Resources",frontMatter:{title:"3-2: Resources",sidebar_label:"Part 2: Resources"},sidebar:"ref",previous:{title:"3-1: Specifiers",permalink:"/help/docs/ref/specifiers"},next:{title:"4-1: Interfacing with AppleScript",permalink:"/help/docs/ref/applescript"}},l=[{value:"Requirements",id:"requirements",children:[]},{value:"Resource terms",id:"resource-terms",children:[{value:"Imported terms",id:"imported-terms",children:[]},{value:"Remote calls",id:"remote-calls",children:[]},{value:"Remote specifiers",id:"remote-specifiers",children:[]}]},{value:"Types of resources",id:"types-of-resources",children:[{value:"Application",id:"application",children:[]},{value:"AppleScript",id:"applescript",children:[]},{value:"System",id:"system",children:[]}]}],c={toc:l};function m(e){var t=e.components,r=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"use")," expressions find and import ",(0,o.kt)("em",{parentName:"p"},"resources"),". Resources refer to external components, such as applications or other scripts."),(0,o.kt)("p",null,"The syntax of a ",(0,o.kt)("inlineCode",{parentName:"p"},"use")," expression depends on the ",(0,o.kt)("a",{parentName:"p",href:"#types-of-resources"},"type of resource")," being referred to."),(0,o.kt)("p",null,"See also: ",(0,o.kt)("a",{parentName:"p",href:"../tutorial/resources"},"Quick Tutorial"),"."),(0,o.kt)("h2",{id:"requirements"},"Requirements"),(0,o.kt)("p",null,"Many external components are not necessarily available in any generic host environment. For example, a script might rely on an application which is not installed by default."),(0,o.kt)("p",null,"To this end, a ",(0,o.kt)("inlineCode",{parentName:"p"},"use")," expression declares a script ",(0,o.kt)("em",{parentName:"p"},"requirement"),". If any such requirement is not met by the host environment, the script will refuse to run. The conditions under which a requirement is deemed met are specific to each resource type."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"use application Google Chrome\n")),(0,o.kt)("p",null,"This declares a requirement on Google Chrome being installed. If Google Chrome is not installed, the parser ",(0,o.kt)("sup",{parentName:"p",id:"fnref-parse-error"},(0,o.kt)("a",{parentName:"sup",href:"#fn-parse-error",className:"footnote-ref"},"parse-error"))," complains:"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"this script requires the application \u201cGoogle Chrome\u201d, which was not found on your system")),(0,o.kt)("h2",{id:"resource-terms"},"Resource terms"),(0,o.kt)("p",null,"A ",(0,o.kt)("inlineCode",{parentName:"p"},"use")," expression imports a resource by defining a ",(0,o.kt)("em",{parentName:"p"},"resource term")," for it."),(0,o.kt)("p",null,"Note that ",(0,o.kt)("em",{parentName:"p"},"resource")," and ",(0,o.kt)("em",{parentName:"p"},"resource term")," are interchangeable; the latter simply emphasizes that a resource is a unique kind of ",(0,o.kt)("a",{parentName:"p",href:"terms"},"term"),"."),(0,o.kt)("h3",{id:"imported-terms"},"Imported terms"),(0,o.kt)("p",null,"Resources are often accompanied by ",(0,o.kt)("em",{parentName:"p"},"imported terms"),", which they ",(0,o.kt)("a",{parentName:"p",href:"dictionaries"},"contain and export"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"use application Contacts\n\nContacts : person --\x3e type 'person' (contained within Contacts)\nperson --\x3e type 'person' (exported by Contacts)\n")),(0,o.kt)("p",null,"The scripting dictionary for Contacts defines the ",(0,o.kt)("a",{parentName:"p",href:"terms"},"type term")," ",(0,o.kt)("inlineCode",{parentName:"p"},"person"),". Therefore, the ",(0,o.kt)("inlineCode",{parentName:"p"},"Contacts")," resource term contains and exports ",(0,o.kt)("inlineCode",{parentName:"p"},"person")," (along with the rest of the dictionary)."),(0,o.kt)("h3",{id:"remote-calls"},"Remote calls"),(0,o.kt)("p",null,"At runtime, a resource evaluates to a ",(0,o.kt)("em",{parentName:"p"},"resource object")," that represents it. A command call sent to such an object usually triggers a ",(0,o.kt)("em",{parentName:"p"},"remote call"),"."),(0,o.kt)("p",null,"The nature of a remote call depends on the type of the object responsible, and therefore, on the type of resource it represents."),(0,o.kt)("h4",{id:"encoding"},"Encoding"),(0,o.kt)("p",null,"Most remote calls require ",(0,o.kt)("em",{parentName:"p"},"encoding")," (or ",(0,o.kt)("em",{parentName:"p"},"boxing")," or ",(0,o.kt)("em",{parentName:"p"},"packing"),") of data into a ",(0,o.kt)("em",{parentName:"p"},"transport format"),". For example, calls sent to applications and AppleScript scripts are routed through AppleEvents, which require data in the ",(0,o.kt)("em",{parentName:"p"},"AppleEvent descriptor")," transport format."),(0,o.kt)("p",null,"Encoding can fail if an object is not adequately representable in the target format. For instance, a ",(0,o.kt)("inlineCode",{parentName:"p"},"record")," can only be encoded as an AppleEvent descriptor if its keys are ",(0,o.kt)("a",{parentName:"p",href:"terms#uid-domains"},(0,o.kt)("inlineCode",{parentName:"a"},"ae4"))," constants."),(0,o.kt)("h4",{id:"decoding"},"Decoding"),(0,o.kt)("p",null,"Data received in response to a remote call requires ",(0,o.kt)("em",{parentName:"p"},"decoding")," (or ",(0,o.kt)("em",{parentName:"p"},"unboxing")," or ",(0,o.kt)("em",{parentName:"p"},"unpacking"),") from a transport format into a native BushelScript format. For example, reply AppleEvents contain data in the ",(0,o.kt)("em",{parentName:"p"},"AppleEvent descriptor")," format, which must be decoded to be used."),(0,o.kt)("h5",{id:"wrapper-objects"},"Wrapper objects"),(0,o.kt)("p",null,"Decoding can fail if a suitable data type mapping does not exist. When this occurs, the data is left intact in a ",(0,o.kt)("em",{parentName:"p"},"wrapper object"),". A wrapper object can subsequently be sent in any remote calls using the same transport format, but is otherwise opaque and fairly useless."),(0,o.kt)("h3",{id:"remote-specifiers"},"Remote specifiers"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"specifiers"},"Specifiers")," rooted in a resource object are called ",(0,o.kt)("em",{parentName:"p"},"remote specifiers")," because their evaluation triggers a remote call."),(0,o.kt)("h2",{id:"types-of-resources"},"Types of resources"),(0,o.kt)("h3",{id:"application"},(0,o.kt)("a",{parentName:"h3",href:"grammar#require"},"Application")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"use app")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"use application")," are refer to an application installed on the host system."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Imported terms"),": The app's AppleScript terminology, if it defines any."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Remote calls"),": AppleEvents sent to the application.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Transport format"),": ",(0,o.kt)("em",{parentName:"li"},"AppleEvent descriptor")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Remote specifiers"),": AppleEvent Object Model (AEOM) objects within the application.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"use app Mail\nuse application id com.apple.Safari\n\n-- Error if Google Chrome is not installed:\nuse application Google Chrome\n\ntell Google Chrome\n  make new window -- Remote call\n  name of front window -- Remote specifier eval\nend tell\n")),(0,o.kt)("h3",{id:"applescript"},(0,o.kt)("a",{parentName:"h3",href:"grammar#require"},"AppleScript")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"use AppleScript")," refers to an AppleScript file located somewhere on the host system."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Imported terms"),": The script's ",(0,o.kt)("inlineCode",{parentName:"li"},"sdef")," terminology, if it defines any."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Remote calls"),": AppleEvents executed in the context of the script.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Transport format"),": ",(0,o.kt)("em",{parentName:"li"},"AppleEvent descriptor")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Remote specifiers"),": None (will produce an error when evaluated).")),(0,o.kt)("h3",{id:"system"},(0,o.kt)("a",{parentName:"h3",href:"grammar#require"},"System")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"use system")," or equivalent refers to the operating system in general, or a specific minimum version thereof."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Imported terms"),": The ",(0,o.kt)("inlineCode",{parentName:"li"},"System Events")," app's AppleScript terminology."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Remote calls"),": AppleEvents sent to the ",(0,o.kt)("inlineCode",{parentName:"li"},"System Events")," app.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Transport format"),": ",(0,o.kt)("em",{parentName:"li"},"AppleEvent descriptor")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Remote specifiers"),": AppleEvent Object Model (AEOM) objects within ",(0,o.kt)("inlineCode",{parentName:"li"},"System Events"),".")),(0,o.kt)("div",{className:"footnotes"},(0,o.kt)("hr",{parentName:"div"}),(0,o.kt)("ol",{parentName:"div"},(0,o.kt)("li",{parentName:"ol",id:"fn-parse-error"},"Unmet requirements are a parse error because a required resource could provide terms used in the script.",(0,o.kt)("a",{parentName:"li",href:"#fnref-parse-error",className:"footnote-backref"},"\u21a9")))))}m.isMDXComponent=!0}}]);