(self.webpackChunk=self.webpackChunk||[]).push([[607],{3905:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>u,kt:()=>p});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),d=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=d(n),p=a,f=m["".concat(s,".").concat(p)]||m[p]||c[p]||o;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function p(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var d=2;d<o;d++)i[d]=n[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9572:(e,t,n)=>{"use strict";n.r(t),n.d(t,{frontMatter:()=>l,metadata:()=>s,toc:()=>d,default:()=>c});var r=n(2122),a=n(9756),o=(n(7294),n(3905)),i=["components"],l={title:"4-1: Functions",sidebar_label:"Part 1: Functions"},s={unversionedId:"ref/functions",id:"ref/functions",isDocsHomePage:!1,title:"4-1: Functions",description:"Functions allow BushelScript code to be named, reused, and called recursively. Put another way, they allow commands to be defined and implemented locally, in BushelScript code (as opposed to remotely, like in apps).",source:"@site/docs/ref/functions.md",sourceDirName:"ref",slug:"/ref/functions",permalink:"/help/docs/ref/functions",version:"current",lastUpdatedBy:"Ian Gregory",lastUpdatedAt:1663460965,formattedLastUpdatedAt:"9/17/2022",sidebar_label:"Part 1: Functions",frontMatter:{title:"4-1: Functions",sidebar_label:"Part 1: Functions"},sidebar:"ref",previous:{title:"3-2: Resources",permalink:"/help/docs/ref/resources"},next:{title:"4-2: Control Flow",permalink:"/help/docs/ref/control-flow"}},d=[{value:"Named functions",id:"named-functions",children:[]},{value:"Anonymous functions",id:"anonymous-functions",children:[]}],u={toc:d};function c(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Functions allow BushelScript code to be named, reused, and called recursively. Put another way, they allow commands to be defined and implemented locally, in BushelScript code (as opposed to remotely, like in apps)."),(0,o.kt)("p",null,"For background on the design of the command model, including functions, please consult ",(0,o.kt)("a",{parentName:"p",href:"https://igregory.ca/2021/bushel-command-model/"},"this blog post"),"."),(0,o.kt)("p",null,"See also: ",(0,o.kt)("a",{parentName:"p",href:"/docs/tutorial/functions"},"Quick Tutorial"),"."),(0,o.kt)("h2",{id:"named-functions"},(0,o.kt)("a",{parentName:"h2",href:"/docs/ref/grammar#definition"},"Named functions")),(0,o.kt)("p",null,"A named function definition consists of:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"One of the keywords ",(0,o.kt)("inlineCode",{parentName:"li"},"on")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"to")),(0,o.kt)("li",{parentName:"ul"},"A name, which gets defined as a command term in the current dictionary if such a term isn't already there"),(0,o.kt)("li",{parentName:"ul"},"A list of parameter definitions, one per line, which each consist of:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"A name, which gets defined as a parameter term in the command's dictionary if such a term isn't already there"),(0,o.kt)("li",{parentName:"ul"},"An optional bracketed ",(0,o.kt)("a",{parentName:"li",href:"/docs/ref/terms#semantic-uris"},"URI")," for the parameter term, or one of the keywords ",(0,o.kt)("inlineCode",{parentName:"li"},"direct")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"target"),"; if absent, defaults to a URI derived from the parameter name",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"This can be used to define direct and target parameters, or to provide synonym parameter names"))),(0,o.kt)("li",{parentName:"ul"},"An optional variable name to refer to the parameter's value in the function body; if absent, defaults to the parameter's name"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("inlineCode",{parentName:"li"},"type"),", used by local function selection to determine which function to call given a set of arguments"))),(0,o.kt)("li",{parentName:"ul"},"The keyword ",(0,o.kt)("inlineCode",{parentName:"li"},"do")," to end the parameter list, followed by a line break"),(0,o.kt)("li",{parentName:"ul"},"A sequence of expressions in the function body, which may use any command, parameter and variable terms just defined"),(0,o.kt)("li",{parentName:"ul"},"The keyword ",(0,o.kt)("inlineCode",{parentName:"li"},"end")," to end the function body")),(0,o.kt)("p",null,"e.g.,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'to add\n  item [direct] (item to add)\n  to [target] (target list): list\n  times: integer\ndo\n  repeat times times\n    tell Core to add |item to add| to target list\n  end\n  target list -- Returns the target.\nend\n\n{"first"}\ntell that to add "tail" times 5\n')),(0,o.kt)("h2",{id:"anonymous-functions"},(0,o.kt)("a",{parentName:"h2",href:"/docs/ref/grammar#compound"},"Anonymous functions")),(0,o.kt)("p",null,"An anonymous function definition consists of:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Optionally:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"The keyword ",(0,o.kt)("inlineCode",{parentName:"li"},"take")),(0,o.kt)("li",{parentName:"ul"},"A comma-separated list of variable names to bind ordered parameters to"))),(0,o.kt)("li",{parentName:"ul"},"The keyword ",(0,o.kt)("inlineCode",{parentName:"li"},"do")),(0,o.kt)("li",{parentName:"ul"},"One of:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Sequence body:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"A line break"),(0,o.kt)("li",{parentName:"ul"},"A sequence of expressions in the function body, which may use any variable terms just defined"),(0,o.kt)("li",{parentName:"ul"},"The keyword ",(0,o.kt)("inlineCode",{parentName:"li"},"end")))),(0,o.kt)("li",{parentName:"ul"},"Non-sequence body:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"A single expression for the function body, which may use any variable terms just defined")))))),(0,o.kt)("p",null,"e.g.,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"require library List\n\ntell {}\n  add map {1,2,3} by take value do\n    value + 1\n  end\n  add map {1,2,3} by take value do value + 2\n  add map {1,2,3} by do it + 3\nend\n")))}c.isMDXComponent=!0}}]);