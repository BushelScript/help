(self.webpackChunk=self.webpackChunk||[]).push([[840],{3905:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>c,kt:()=>u});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=r.createContext({}),l=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=l(n),u=i,h=m["".concat(p,".").concat(u)]||m[u]||d[u]||a;return n?r.createElement(h,o(o({ref:t},c),{},{components:n})):r.createElement(h,o({ref:t},c))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var l=2;l<a;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4780:(e,t,n)=>{"use strict";n.r(t),n.d(t,{frontMatter:()=>s,metadata:()=>p,toc:()=>l,default:()=>d});var r=n(2122),i=n(9756),a=(n(7294),n(3905)),o=["components"],s={title:"2-2: Dictionaries",sidebar_label:"Part 2: Dictionaries"},p={unversionedId:"ref/dictionaries",id:"ref/dictionaries",isDocsHomePage:!1,title:"2-2: Dictionaries",description:"A dictionary is a set of terms identified by term name. Dictionaries are themselves contained in terms. Every term has a dictionary. The term that contains a dictionary is the dictionary's container term. Organizing terms into dictionaries helps reduce name clashes.",source:"@site/docs/ref/dictionaries.md",sourceDirName:"ref",slug:"/ref/dictionaries",permalink:"/help/docs/ref/dictionaries",version:"current",lastUpdatedBy:"Ian Gregory",lastUpdatedAt:1630343674,formattedLastUpdatedAt:"8/30/2021",sidebar_label:"Part 2: Dictionaries",frontMatter:{title:"2-2: Dictionaries",sidebar_label:"Part 2: Dictionaries"},sidebar:"ref",previous:{title:"2-1: Terms",permalink:"/help/docs/ref/terms"},next:{title:"3-1: Specifiers",permalink:"/help/docs/ref/specifiers"}},l=[{value:"The lexicon",id:"the-lexicon",children:[]},{value:"Term lookup",id:"term-lookup",children:[]},{value:"Exporting dictionaries",id:"exporting-dictionaries",children:[]}],c={toc:l};function d(e){var t=e.components,n=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"A ",(0,a.kt)("em",{parentName:"p"},"dictionary")," is a set of ",(0,a.kt)("a",{parentName:"p",href:"/docs/ref/terms"},"terms")," identified by ",(0,a.kt)("a",{parentName:"p",href:"/docs/ref/terms#term-names"},"term name"),". Dictionaries are themselves contained in terms. Every term has a dictionary. The term that contains a dictionary is the dictionary's ",(0,a.kt)("em",{parentName:"p"},"container term"),". Organizing terms into dictionaries helps reduce name clashes."),(0,a.kt)("p",null,"See also: ",(0,a.kt)("a",{parentName:"p",href:"/docs/tutorial/dictionaries"},"Quick Tutorial"),"."),(0,a.kt)("h2",{id:"the-lexicon"},"The lexicon"),(0,a.kt)("p",null,"The ",(0,a.kt)("em",{parentName:"p"},"lexicon")," refers to the list of in-scope dictionaries at a given point in a program. A term is ",(0,a.kt)("em",{parentName:"p"},"in the lexicon")," if it is defined by one of those dictionaries."),(0,a.kt)("h2",{id:"term-lookup"},"Term lookup"),(0,a.kt)("p",null,"When the parser encounters a term name (such as ",(0,a.kt)("inlineCode",{parentName:"p"},"abc"),"), it consults the lexicon to find a term with that name, using a process called ",(0,a.kt)("em",{parentName:"p"},"term lookup"),". Term lookup has two subprocesses, ",(0,a.kt)("em",{parentName:"p"},"primary lookup")," and ",(0,a.kt)("em",{parentName:"p"},"secondary lookup"),", which are attempted in that order."),(0,a.kt)("p",null,"Primary term lookup finds terms by searching dictionaries in the lexicon, in order from most to least recently pushed, for a term with the name in question. The lookup ends once such a term is found, even if there are other such terms in the lexicon dictionaries. Terms that are invisible to primary lookup in this way are said to be ",(0,a.kt)("em",{parentName:"p"},"shadowed"),". Primary lookup is very similar to lexical scoping, as found in many other programming languages."),(0,a.kt)("p",null,'If primary lookup fails to find a term, secondary lookup is attempted instead. Secondary lookup finds terms exported by the dictionaries in the lexicon, in the same search order as primary lookup would search them. The meaning of "exported" is discussed below.'),(0,a.kt)("p",null,"If both primary and secondary lookup fail for a name, then the parser will backtrack one word and try again. For example, if the name ",(0,a.kt)("inlineCode",{parentName:"p"},"one two three")," failed term lookup, then the parser will reinterpret it as ",(0,a.kt)("inlineCode",{parentName:"p"},"|one two| three"),", where ",(0,a.kt)("inlineCode",{parentName:"p"},"one two")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"three")," are separate names. If lookup of ",(0,a.kt)("inlineCode",{parentName:"p"},"one two")," fails, then the parser will backtrack again and reinterpret it as ",(0,a.kt)("inlineCode",{parentName:"p"},"|one| two three"),". Note that if ",(0,a.kt)("inlineCode",{parentName:"p"},"one")," happened to be a language keyword, it would be interpreted as such at this point; this is why terms that begin with language keywords are allowed. Finally, if lookup of ",(0,a.kt)("inlineCode",{parentName:"p"},"one")," fails again, then the parser raises an undefined term error."),(0,a.kt)("h2",{id:"exporting-dictionaries"},"Exporting dictionaries"),(0,a.kt)("p",null,"An ",(0,a.kt)("em",{parentName:"p"},"exporting dictionary"),' "exports" its contents, making them visible to secondary term lookup when the dictionary\'s container term is in the lexicon. All dictionaries other than command dictionaries (used for parameters) and ',(0,a.kt)("inlineCode",{parentName:"p"},"function")," dictionaries (used for variables) are exporting."),(0,a.kt)("p",null,"Given the following dictionary setup:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"defining type A\n  defining type B\n    define type C\n  end\nend\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"A")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"B")," are both terms containing exporting dictionaries. Therefore, ",(0,a.kt)("inlineCode",{parentName:"p"},"B")," is visible to secondary term lookup when ",(0,a.kt)("inlineCode",{parentName:"p"},"A")," is in the lexicon because ",(0,a.kt)("inlineCode",{parentName:"p"},"A")," exports it. Likewise, ",(0,a.kt)("inlineCode",{parentName:"p"},"C")," is visible to secondary term lookup when ",(0,a.kt)("inlineCode",{parentName:"p"},"B")," is in the lexicon because ",(0,a.kt)("inlineCode",{parentName:"p"},"B")," exports it."),(0,a.kt)("p",null,"Note that ",(0,a.kt)("inlineCode",{parentName:"p"},"C")," is ",(0,a.kt)("em",{parentName:"p"},"not")," visible when only ",(0,a.kt)("inlineCode",{parentName:"p"},"A")," is in the lexicon because ",(0,a.kt)("inlineCode",{parentName:"p"},"C")," is exported by ",(0,a.kt)("inlineCode",{parentName:"p"},"B"),", not ",(0,a.kt)("inlineCode",{parentName:"p"},"A"),". In this case, ",(0,a.kt)("inlineCode",{parentName:"p"},"C")," could be referred to as ",(0,a.kt)("inlineCode",{parentName:"p"},"B/C")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"A/B/C"),", but not as just ",(0,a.kt)("inlineCode",{parentName:"p"},"C"),"."),(0,a.kt)("p",null,"The mechanics of exporting may be changed before v1.0."))}d.isMDXComponent=!0}}]);